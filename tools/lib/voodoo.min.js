'use strict';var e=!0,k=null,l=!1;function w(){return function(){}}function z(f){return function(){return this[f]}}
(function(f,r){function W(){function y(){}function G(a,b){this.width=a;this.height=b}function H(a,b){this.x=a;this.y=b}function Z(){}function N(){this.vc={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",
crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",
forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",
lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}function I(){function a(){function a(c){var q={},h=d[c].prototype,f;for(f in h){var g=h[f];if("function"===typeof g){if(g===b[f]){for(var n=
l,m=c+1;m<d.length;++m)if(d[m].prototype[f]!==g){n=e;break}if(!n){n=l;for(m=c-1;0<=m;--m){var r=d[m].prototype[f];if(r!==g&&"undefined"!==typeof r){g=function(a,c){return function(){return p[a][c].apply(b,arguments)}}(m,f);n=e;break}}if(!n)continue}}n={};for(m=c-1;0<=m;--m)if(d[m].prototype[f]!==g){n=p[m];break}q[f]=function(a,c,d,p){return function(){var a=b.ba;b.ba=p;var q={},h;for(h in d){var f=d[h];"function"===typeof f&&(q[h]=b[h],b[h]=f)}h=c.apply(b,arguments);for(var ga in q)b[ga]=q[ga];b.ba=
a;return h}}(f,g,h,n)}}p.push(q)}for(var d=b.constructor.ancestors,p=[],q=0;q<d.length;++q)a(q);b.ba=0<p.length?p[p.length-1]:{}}var b=this;this.ba=k;Object.defineProperty(this,"base",{get:function(){b.ba||a();return b.ba},set:function(){t.k("base is read-only")},o:l});this.construct.apply(this,arguments)}function V(a){var b=a[0],c=this,d;for(d in b)try{"function"===typeof b[d]&&(c[d]=function(a,b){return function(){for(var d,p=0;p<b.length;++p)d=b[p],d=d[a].apply(d,arguments);return d==b[b.length-
1]?c:d}}(d,a))}catch(p){}}function x(a,b,c,d,p,q){this.cc=a;this.h=b;this.d=c;this.gc=d;this.xa=p;this.Fb=q;this.n=[]}function L(a){this.J=a}function O(){this.J={}}function X(){this.ha=l;this.tb=this.gb=0;this.q=r.createElement("div");this.q.style.position="fixed";this.q.style.zIndex=999999999;this.q.style.left="0px";this.q.style.top="0px";this.q.style.backgroundColor="black";this.q.style.color="lime";this.q.style.fontStyle="bold";this.q.style.fontSize="200%";this.q.style.fontFamily="sans-serif";
this.q.display="none";var a=this;this.Dc=setInterval(function(){a.hb=a.gb;a.Xc=a.tb;a.gb=0;a.tb=0},1E3)}function M(){}function A(){}function W(){}function C(){}function Y(a){this.Fa=a;this.Kc=0;this.Ba={};this.La=this.Ma=this.Oa=this.Na=Number.MIN_VALUE;this.m()}function $(){this.va={};this.Lc=this.Mc=0;this.zb={}}function P(){this.W={};this.lb=0}function Q(a,b,c,d){this.t=a;this.na=b;this.$a="undefined"===typeof d?-1:d;this.e=c;this.s=a.model}function U(){}function ca(){}function da(){}function D(a){this.a=
a;this.Qb();this.a.ra.vb(new H(0,0));this.nc();var b=this;this.a.on("removemodel",function(a){b.l&&a.model===b.l.s&&(b.l=k);if(b.S)for(var d=0;3>d;++d){var p=b.S[d];p&&a.model===p.s&&(b.S[d]=k)}if(b.X)for(d=0;3>d;++d)(p=b.X[d])&&a.model===p.s&&(b.X[d]=k)})}function v(a,b,c,d){this.d=new THREE.Camera;this.ib=new THREE.Frustum;this.Ca=a;this.Ga=b;this.B=c;this.H=d;this.Jc();this.Ac()}function J(a){this.a=a;this.h=a.h;this.ec=new THREE.Projector}function B(a,b){this.i=a;this.t=b;this.Q=f.voodoo.engine.Q;
this.ua=k;this.e=new THREE.Object3D;this.i.add(this.e);this.oa=[];this.fa=[];this.f=new P;Object.defineProperty(this,"objects",{get:function(){for(var a=[],b=this.e.children,p=0;p<b.length;++p)b[p].addedToVoodooScene&&a.push(b[p]);return a},set:function(){t.k("objects is read-only")},o:l})}function E(){this.i=new THREE.Scene}function R(a,b,c){this.v=a;this.i=b;this.t=c}function K(){this.v=[]}function s(a){this.a=a;this.Y=[];this.od();this.yc();this.zc();this.Sc();this.a.c.performanceScaling?(this.da=
new X,this.Zb=new Date,this.dc=l):this.da=k}function u(a){a=new n(a);for(var b in a);this.c=a;this.pd();this.jb=new O;this.Q=new $;this.N=[];Object.defineProperty(this,"models",{get:function(){for(var a=[],b=0;b<this.N.length;++b)a.push(this.N[b]);return a},set:function(){t.k("models is read-only")},o:l});this.ed();switch(a.renderer){case ea.ThreeJs:this.h=new s(this);this.ra=new J(this);break;default:this.ra=this.h=k,t.k("Unsupported renderer")}this.f=new P;this.Pa=new D(this);f.voodoo.engine=this;
a.standardLighting&&(new fa({color:"white"}),new aa({color:"white"}));this.Ua=this.Va=this.ab=-1;b=0===this.c.updateInterval;var c=0===this.c.renderInterval;if(a.frameLoop){(b||c)&&this.fc(b,c);var d=this;b||(this.ab=f.setInterval(function(){d.m()},this.c.updateInterval));c||(this.Va=f.setInterval(function(){d.h.V()},this.c.renderInterval))}}function n(a){if("undefined"!==typeof a)for(var b in a)this[b]=a[b]}y.prototype.wc=function(a){f.console.log("[voodoo] "+a)};y.prototype.k=function(a){this.wc("**ERROR** "+
a);throw"Voodoo Exception: "+a;};var t=new y;G.prototype.width=0;G.prototype.height=0;H.prototype.x=0;H.prototype.y=0;Z.prototype.disableStencils=l;Z.prototype.drawStencils=l;Z.prototype.showFps=l;this.debug=new Z;N.prototype.convertCssColorToThreeJsColor=function(a){a=a.toLowerCase();return"#"==a[0]?this.Hb(a):0==a.indexOf("rgb(")?(a=a.substring(4,a.length-1).split(","),this.Ib(a[0],a[1],a[2])):0==a.indexOf("rgba(")?(a=a.substring(5,a.length-1).split(","),this.Ib(a[0],a[1],a[2])):0==a.indexOf("hsl(")?
(a=a.substring(4,a.length-1).split(","),this.Gb(a[0],a[1],a[2])):0==a.indexOf("hsla(")?(a=a.substring(5,a.length-1).split(","),this.Gb(a[0],a[1],a[2])):this.xc(a)};N.prototype.findAbsolutePosition=function(a){var b=0,c=0;if(a.offsetParent){do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}return{x:b,y:c}};N.prototype.Hb=function(a){return new THREE.Color(parseInt("0x"+a.substring(1),16))};N.prototype.Ib=function(a,b,c){a=parseFloat(a)/255;b=parseFloat(b)/255;c=parseFloat(c)/255;return(new THREE.Color).setRGB(a,
b,c)};N.prototype.Gb=function(a,b,c){a=parseFloat(a);b=parseFloat(b)/100;c=parseFloat(c)/100;b*=1-Math.abs(2*c-1);var d=a/60,p=b*(1-Math.abs(parseInt(d,10)%2-1)),q=a=0,f=0;0<=d&&1>d?(a=b,q=p):1<=d&&2>d?(a=p,q=b):2<=d&&3>d?(q=b,f=p):3<=d&&4>d?(q=p,f=b):4<=d&&5>d?(a=p,f=b):5<=d&&6>d&&(a=b,f=p);c-=0.5*b;return(new THREE.Color).setRGB(a+c,q+c,f+c)};N.prototype.xc=function(a){return this.Hb(this.vc[a.toLowerCase()])};this.utility=new N;I.prototype.construct=function(){throw"Extendable::construct not implemented";
};I.prototype.base={};I.extend=function(a){function b(){d.apply(this,arguments)}function c(){}var d=this;c.prototype=d.prototype;b.extend=d.extend;b.prototype=new c;var p=l;if("undefined"!==typeof a){var f=(p="function"===typeof a)?a.prototype:a,g;for(g in f)b.prototype[g]=f[g]}b.prototype.constructor=b;f="undefined"===typeof d.ancestors?[]:d.ancestors.slice(0);this!==I&&f.push(d);p&&(f=f.concat(a.ancestors),f.push(a));b.ancestors=f.slice(0);return b};this.Extendable=I;var F={Above:0,Below:1,BelowStencil:2,
Seam:3,SeamStencil:4};x.prototype.pc=function(a){this.n.push(a)};x.prototype.Wc=function(a){a=this.n.indexOf(a);-1!=a&&this.n.splice(a,1)};x.prototype.Fb=k;x.prototype.d=k;x.prototype.cc=k;x.prototype.h=k;x.prototype.gc=k;x.prototype.xa=k;x.prototype.n=k;L.prototype["delete"]=function(a,b,c){delete this.Ha(b,c)[a]};L.prototype.get=function(a,b,c){return this.Ha(b,c)[a]};L.prototype.has=function(a,b,c){return this.Ha(b,c).hasOwnProperty(a)};L.prototype.set=function(a,b,c,d){this.Ha(c,d)[a]=b};L.prototype.Ha=
function(a,b){var c,d;"undefined"===typeof a?(c=this.$b,d=this.ac):(c=a,d=b||"*");this.J.hasOwnProperty(d)||(this.J[d]={});this.J[d].hasOwnProperty(c)||(this.J[d][c]={});return this.J[d][c]};L.prototype.$b="";L.prototype.ac="";O.prototype.Jb=function(a){var b=new L(this.J);b.$b=a.name;b.ac=a.organization;return b};var ba=0,g=I.extend();g.prototype.cleanUp=function(){var a=this.base.cleanUp;"function"===typeof a&&a()};g.prototype.construct=function(a){!this.viewType.prototype.above&&!this.viewType.prototype.below&&
t.k("View must exist on at least one layer");this.stencilViewType=this.stencilViewType||this.viewType;this.cd();if("undefined"===typeof f.voodoo.engine||f.voodoo.engine===k)f.voodoo.engine=new u(new n);this.f=new P;this.dd();if("undefined"===typeof a||!a)a={};this.initialize(a);this.Bc();this.gd();this.setUpViews();f.voodoo.engine.oc(this)};g.prototype.destroy=function(){this.j(new f.voodoo.Event("destroy",this));this.tearDownViews();f.voodoo.engine.Vc(this);this.t&&this.t.destroy&&this.t.destroy();
this.sa&&this.sa.destroy&&this.sa.destroy();this.cleanUp();this.f.u();this.sa=this.t=this.f=k};g.prototype.dispatch=function(a){a.model=this;this.j(a);return this};g.prototype.initialize=function(a){var b=this.base.initialize;"function"===typeof b&&b(a)};g.prototype.off=function(a,b){this.f.mb(a,b);return this};g.prototype.on=function(a,b){this.f.nb(a,b);"load"==a&&this.Qa===this.Ra&&b.call(this,new f.voodoo.Event("load",this));return this};g.prototype.setUpViews=function(){var a=this.base.setUpViews;
"function"===typeof a&&a()};g.prototype.tearDownViews=function(){var a=this.base.tearDownViews;"function"===typeof a&&a()};g.prototype.update=function(a){var b=this.base.update;"function"===typeof b&&b(a)};g.prototype.cache=k;g.prototype.loaded=l;g.prototype.stencilView=k;g.prototype.view=k;g.prototype.j=function(a){this.f.j(this,a)};g.prototype.Bc=function(){this.n=[];this.ia=[];this.Ra=this.Qa=0;var a=f.voodoo.engine.h.Y;Object.defineProperty(this,"loaded",{get:function(){return this.Qa===this.Ra},
set:function(){t.k("loaded is read-only")},o:l});for(var b=this.stencilViewType==this.viewType,c=0;c<a.length;++c){var d=a[c];switch(d.cc){case F.Above:this.viewType.prototype.above&&this.n.push(new this.viewType(this,d));break;case F.Below:this.viewType.prototype.below&&this.n.push(new this.viewType(this,d));break;case F.Seam:this.viewType.prototype.above&&this.n.push(new this.viewType(this,d));break;case F.BelowStencil:this.viewType.prototype.below&&(b?this.n.push(new this.viewType(this,d)):this.ia.push(new this.stencilViewType(this,
d)));break;case F.SeamStencil:this.viewType.prototype.below&&(b?this.n.push(new this.viewType(this,d)):this.ia.push(new this.stencilViewType(this,d)))}}this.t=1<this.n.length?new V(this.n):this.n[0];this.sa=1<this.ia.length?new V(this.ia):this.ia[0];this.Ra=this.n.length+this.ia.length};g.prototype.bc=function(){this.Qa++;this.Qa===this.Ra&&this.j(new f.voodoo.Event("load",this))};g.prototype.cd=function(){this.Ia="<"+ ++ba+",";"*"!==this.organization&&(this.Ia+=this.organization+".");this.Ia+=this.name+
">"};g.prototype.dd=function(){this.J=f.voodoo.engine.jb.Jb(this);Object.defineProperty(this,"cache",{get:z("J"),set:function(){t.k("cache is read-only")},o:l})};g.prototype.gd=function(){Object.defineProperty(this,"view",{get:z("t"),set:function(){t.k("view is read-only")},o:l});Object.defineProperty(this,"stencilView",{get:z("sa"),set:function(){t.k("stencilView is read-only")},o:l})};g.prototype.name=k;g.prototype.organization="*";g.prototype.viewType=k;g.prototype.stencilViewType=k;g.extend=function(a){a=
I.extend.call(this,a);var b=this.prototype.viewType,c=a.prototype.viewType;"undefined"!==typeof b&&(b!==k&&"undefined"!==typeof c&&c!==k&&b!=c)&&(a.prototype.viewType=b.extend(c));b=this.prototype.stencilViewType;c=a.prototype.stencilViewType;"undefined"!==typeof b&&(b!=k&&"undefined"!==typeof c&&c!=k&&b!=c)&&(a.prototype.stencilViewType=b.extend(c));b=this.prototype.name;c=a.prototype.name;"undefined"!==typeof b&&(b!==k&&"undefined"!==typeof c&&c!==k&&c!==b)&&(a.prototype.name=b+"."+c);return a};
this.Model=g;var m=I.extend();m.prototype.construct=function(a,b){this.fd();this.s=a;this.U=b;this.i=this.U.gc.Kb(this);this.v=this.U.xa.Lb(this);this.J=this.U.Fb.Jb(this.s);this.dirty();this.U.pc(this);this.la=e;this.load();this.la&&this.s.bc()};m.prototype.destroy=function(){this.unload();this.v.u();this.i.u();this.U.Wc(this);this.J=this.U=this.i=this.v=this.s=k};m.prototype.dirty=function(){this.i.F=e};m.prototype.load=function(){var a=this.base.load;"function"===typeof a&&a()};m.prototype.unload=
function(){var a=this.base.unload;"function"===typeof a&&a()};m.prototype.above=e;m.prototype.below=e;m.prototype.cache=k;m.prototype.camera=k;m.prototype.loaded=k;m.prototype.model=k;m.prototype.renderer=k;m.prototype.scene=k;m.prototype.triggers=k;m.prototype.fd=function(){Object.defineProperty(this,"cache",{get:z("J"),set:function(){t.k("cache is read-only")},o:l});Object.defineProperty(this,"camera",{get:function(){return this.U.d},set:function(){t.k("camera is read-only")},o:l});Object.defineProperty(this,
"loaded",{get:z("la"),set:function(a){(this.la=a)&&this.s.bc()},o:e});Object.defineProperty(this,"model",{get:z("s"),set:function(){t.k("model is read-only")},o:l});Object.defineProperty(this,"renderer",{get:function(){return this.U.h},set:function(){t.k("renderer is read-only")},o:l});Object.defineProperty(this,"scene",{get:z("i"),set:function(){t.k("scene is read-only")},o:l});Object.defineProperty(this,"triggers",{get:z("v"),set:function(){t.k("triggers is read-only")},o:l})};m.extend=function(a){return I.extend.call(this,
a)};this.View=m;X.prototype.u=function(){this.ha&&(this.q.display="none",r.body.removeChild(this.q),this.ha=l);f.clearInterval(this.Dc)};X.prototype.Ec=function(){this.gb++;f.voodoo.debug.showFps?(this.ha||(this.q.display="block",r.body.appendChild(this.q),this.ha=e),this.q.innerHTML="Frames/second: "+this.hb+", Renders/second: "+this.Xc):this.ha&&(this.q.display="none",r.body.removeChild(this.q),this.ha=l)};X.prototype.V=function(){this.tb++};X.prototype.hb=0;M.prototype.fovY=0;M.prototype.position=
{};M.prototype.position.x=0;M.prototype.position.y=0;M.prototype.position.z=0;M.prototype.zNear=0;M.prototype.zFar=0;A.prototype.add=w();A.prototype.attach=w();A.prototype.detach=w();A.prototype.off=w();A.prototype.on=w();A.prototype.remove=w();A.prototype.objects=k;A.prototype.u=w();A.prototype.F=e;A.prototype.oa=k;A.prototype.fa=k;W.prototype.Kb=function(){return k};var ea={ThreeJs:0};this.Renderer=ea;C.prototype.cb=w();C.prototype.u=w();C.prototype.V=w();C.prototype.ub=w();C.prototype.$=k;C.prototype.ca=
k;C.prototype.ja=k;C.prototype.Wa=k;C.prototype.Ya=k;C.prototype.ya=k;Y.prototype.mc=function(a){var b=this.Kc++;this.Ba[b]=a;this.kb++;a(this.Na,this.Oa,this.Ma,this.La,e,e);return b};Y.prototype.Tc=function(a){delete this.Ba[a];this.kb--};Y.prototype.m=function(){var a=f.voodoo.utility.findAbsolutePosition(this.Fa),b=this.Fa.offsetWidth,c=this.Fa.offsetHeight,d=a.x!==this.Na||a.y!==this.Oa,p=b!==this.Ma||c!==this.La;if(d||p){this.Na=a.x;this.Oa=a.y;this.Ma=b;this.La=c;for(var q in this.Ba)this.Ba[q].call(k,
this.Na,this.Oa,this.Ma,this.La,d,p)}};Y.prototype.kb=0;$.prototype.Za=function(a,b){var c,d;a.hasOwnProperty("VoodooTrackedElementId")?(d=a.VoodooTrackedElementId,c=this.va[d]):(d=a.VoodooTrackedElementId=this.Mc++,c=this.va[d]=new Y(a));var f=c.mc(b),q=this.Lc++;this.zb[q]={ld:d,kd:c,uc:f};return q};$.prototype.Uc=function(a){var b=this.zb[a],c=b.kd,d=b.ld,b=b.uc;delete this.zb[a];c.Tc(b);0==c.kb&&(delete this.va[d],delete c.Fa.VoodooTrackedElementId)};$.prototype.m=function(){for(var a in this.va)this.va[a].m()};
P.prototype.u=function(){S.ta-=this.lb;this.W=k};P.prototype.j=function(a,b){var c=this.W[b.type];if(c)for(var d=0;d<c.length;++d)c[d].call(a,b)};P.prototype.mb=function(a,b){S.Sb(a)&&(S.ta--,this.lb--);var c=this.W[a];c&&c.indexOf(b)&&c.splice(c.indexOf(b),1)};P.prototype.nb=function(a,b){S.Sb(a)&&(S.ta++,this.lb++);this.W[a]||(this.W[a]=[]);-1==this.W[a].indexOf(b)&&this.W[a].push(b)};Q.prototype.Ja=function(a){return a!=k&&this.s==a.s&&this.$a==a.$a};Q.prototype.s=k;Q.prototype.na=k;Q.prototype.e=
k;Q.prototype.$a=-1;Q.prototype.t=k;this.p=function(a,b,c){this.type=a;this.model=b;this.triggerId="undefined"===typeof c?-1:c};this.p.prototype.Ic=function(a,b,c,d,f,q){this.client.x=a;this.client.y=b;this.hit.x=c;this.hit.y=d;this.hit.z=f;this.button=q||0};this.p.prototype.button=0;this.p.prototype.client={};this.p.prototype.client.x=Number.MAX_VALUE;this.p.prototype.client.y=Number.MAX_VALUE;this.p.prototype.hit={};this.p.prototype.hit.x=Number.MAX_VALUE;this.p.prototype.hit.y=Number.MAX_VALUE;
this.p.prototype.hit.z=Number.MAX_VALUE;this.p.prototype.model=k;this.p.prototype.object=k;this.p.prototype.size={};this.p.prototype.size.x=Number.MAX_VALUE;this.p.prototype.size.y=Number.MAX_VALUE;this.p.prototype.type=k;this.p.prototype.triggerId=-1;this.Event=this.p;var S={ta:0,Sb:function(a){return"mouseup"===a||"mousedown"===a||"click"===a||"dblclick"===a||"mousemove"===a||"mouseover"===a||"mouseout"===a}};U.prototype.add=w();U.prototype.cursor=function(a){this.Mb=a};U.prototype.remove=w();U.prototype.u=
w();U.prototype.Mb="auto";ca.prototype.Lb=function(){return k};ca.prototype.v=k;da.prototype.Ta=function(){return k};da.prototype.vb=w();D.prototype.nc=function(){var a=this;r.addEventListener("mousemove",function(b){a.Oc(b)},l);r.addEventListener("mousedown",function(b){a.Nc(b)},l);r.addEventListener("mouseup",function(b){a.Pc(b)},l)};D.prototype.u=function(){this.Qb();this.a=k};D.prototype.R=function(a,b,c,d){a=new f.voodoo.Event(a,b.s,b.$a);a.Ic(this.eb,this.fb,this.Wb,this.Xb,this.Yb,c);(d||b).s.j(a)};
D.prototype.Qb=function(){this.l=k;this.S=[k,k,k];this.X=[k,k,k];this.rd=l;this.ob=[l,l,l];this.Sa=l;this.Yb=this.Xb=this.Wb=this.fb=this.eb=0;this.Vb=[k,k,k];this.Tb=[0,0,0];this.Ub=[0,0,0]};D.prototype.Nc=function(a){if(this.l!=k){a.preventDefault();var b=this.X[a.button],c=new Date-this.Vb[a.button];this.S[a.button]=this.l;this.R("mousedown",this.l,a.button);this.S[a.button].Ja(b)&&(this.Tb[a.button]==a.clientX&&this.Ub[a.button]==a.clientY&&c<=this.a.c.Cc)&&(this.ob[a.button]=e)}};D.prototype.Oc=
function(a){this.l!=k&&a.preventDefault();this.eb=a.clientX;this.fb=a.clientY;this.Sa=e;this.a.c.realtime&&this.m()};D.prototype.Pc=function(a){if(this.l!=k){a.preventDefault();this.R("mouseup",this.l,a.button);var b=this.S[a.button],c=this.X[a.button];b&&this.l!=b&&this.R("mouseup",this.l,a.button,b);this.l.Ja(b)&&(this.R("click",this.S[a.button],a.button),this.ob[a.button]&&b.Ja(c)?(this.X[a.button]=k,this.ob[a.button]=l,this.R("dblclick",b,a.button)):(this.X[a.button]=b,this.Vb[a.button]=new Date,
this.Tb[a.button]=a.clientX,this.Ub[a.button]=a.clientY))}this.S[a.button]=k};D.prototype.Ta=function(){var a=this.a.ra.Ta();this.Wb=a.Fc;this.Xb=a.Gc;this.Yb=a.Hc;return a.wa};D.prototype.m=function(){this.Sa&&this.a.ra.vb(new H(this.eb,this.fb));if(!(0>=S.ta)){var a=this.Ta();a!=k?(this.Sa&&this.R("mousemove",a),a.Ja(this.l)||(this.l!=k&&this.R("mouseout",this.l),this.R("mouseover",a)),this.a.h.cb(e)):(this.l!=k&&this.R("mouseout",this.l),this.a.h.cb(l));this.l=a;this.Sa=l;this.l!=k?this.a.h.ub(this.l.e.Mb):
this.a.h.ub("auto")}};v.prototype=new M;v.prototype.constructor=v.constructor;v.prototype.Ac=function(){Object.defineProperty(this,"fovY",{get:z("Ga"),set:function(){t.k("fovy is read-only")},o:l});Object.defineProperty(this,"position",{get:function(){return{x:this.d.position.x,y:this.d.position.y,z:this.d.position.z}},set:function(){t.k("position is read-only")},o:l});Object.defineProperty(this,"zNear",{get:z("B"),set:function(){t.k("zNear is read-only")},o:l});Object.defineProperty(this,"zFar",
{get:z("H"),set:function(){t.k("zFar is read-only")},o:l})};v.prototype.Jc=function(){this.qa=this.pb=this.qb=e;this.d.up.x=0;this.d.up.y=-1;this.d.up.z=0;this.ga();this.m();var a=this;f.addEventListener("scroll",function(){a.pa()},l);f.addEventListener("resize",function(){a.ga()},l);this.O=e};v.prototype.pa=function(){this.qb=e};v.prototype.ga=function(){this.pb=e;this.pa()};v.prototype.Z=function(a,b){this.B=a;this.H=b;this.d.projectionMatrix.makePerspective(this.Ga,this.Bb,this.B,this.H);this.qa=
e;this.m()};v.prototype.m=function(){if(this.pb){var a=parseInt(this.Ca.style.width,10),b=parseInt(this.Ca.style.height,10);this.Bb=a/b;a=Math.tan(this.Ga/360*Math.PI);this.qd=b/2/a;this.d.projectionMatrix.makePerspective(this.Ga,this.Bb,this.B,this.H);this.d.position.z=this.qd;this.d.scale.x=-1;this.pb=l;this.qa=this.O=e}this.qb&&(a=parseInt(this.Ca.style.width,10),b=parseInt(this.Ca.style.height,10),this.d.position.x=a/2+f.pageXOffset,this.d.position.y=b/2+f.pageYOffset,this.d.lookAt(new THREE.Vector3(this.d.position.x,
this.d.position.y,0)),this.qb=l,this.qa=this.O=e);this.qa&&(this.d.updateMatrixWorld(e),b=new THREE.Matrix4,b.getInverse(this.d.matrixWorld),this.ib.setFromMatrix((new THREE.Matrix4).multiplyMatrices(this.d.projectionMatrix,b)),this.qa=l)};v.prototype.d=k;v.prototype.ib=k;v.prototype.O=l;J.prototype=new da;J.prototype.constructor=J.constructor;J.prototype.Nb=function(a,b){for(var c=this.h.$.xa.v,d=0;d<c.length;++d){var f=c[d],q=f.s,g=this.kc.intersectObject(f.na,e);if(!(0>=g.length)&&!(0>=g[0].distance||
g[0].distance>=a.Ea))if(!this.a.c.belowLayer||!(0>g[0].point.z&&f.t.below&&this.a.c.stencils&&q.viewType!=q.stencilViewType&&-1===b.indexOf(q)))a.Ea=g[0].distance,a.wa=f,a.sb=g[0].point}return a};J.prototype.Ob=function(a,b){for(var c=this.h.ca.xa.v,d=0;d<c.length;++d){var f=c[d],q=f.s,g=f.na;if(!this.a.c.aboveLayer||!q.view.above)if(g=this.Cb.intersectObject(g,e),!(0>=g.length)&&!(0<=g[0].point.z)&&!(0>=g[0].distance||g[0].distance>=a.Ea))if(!this.a.c.stencils||!(q.viewType!=q.stencilViewType&&-1===
b.indexOf(q)))a.Ea=g[0].distance,a.wa=f,a.sb=g[0].point}return a};J.prototype.Pb=function(){for(var a=[],b=this.h.ja.xa.v,c=0;c<b.length;++c){var d=b[c],f=d.na,g=d.s;g.viewType!==g.stencilViewType&&d.t.below&&-1===b.indexOf(g)&&0<this.Cb.intersectObject(f,e).length&&a.push(g)}return a};J.prototype.Ta=function(){var a={Ea:Number.MAX_VALUE,wa:k,sb:k};if(this.a.c.belowLayer&&this.a.c.aboveLayer)var b=this.a.c.stencils?this.Pb():[],a=this.Nb(a,b),a=this.Ob(a,b);else this.a.c.aboveLayer?a=this.Nb(a,[]):
this.a.c.belowLayer&&(b=this.Pb(),a=this.Ob(a,b));b=a.sb;return{wa:a.wa,Fc:b?b.x:Number.MAX_VALUE,Gc:b?b.y:Number.MAX_VALUE,Hc:b?b.z:Number.MAX_VALUE}};J.prototype.vb=function(a){var b=2*(a.x/this.h.ya.width)-1;a=2*-(a.y/this.h.ya.height)+1;if(this.a.c.aboveLayer){var c=this.h.$.d.d;this.za=new THREE.Vector3(b,a,1);this.ec.unprojectVector(this.za,c);this.za=this.za.sub(c.position).normalize();this.kc=new THREE.Raycaster(c.position,this.za)}this.a.c.belowLayer&&(c=this.h.ca.d.d,this.Aa=new THREE.Vector3(b,
a,1),this.ec.unprojectVector(this.Aa,c),this.Aa=this.Aa.sub(c.position).normalize(),this.Cb=new THREE.Raycaster(c.position,this.Aa))};B.prototype=new A;B.prototype.constructor=B.constructor;B.prototype.add=function(a){a.addedToVoodooTriggers?a.visible=e:this.e.add(a);a.addedToVoodooScene=e;this.oa.push(a);this.Rb(a)&&this.fa.push(a);this.F=e;var b=new f.voodoo.Event("add");b.object=a;this.f.j(this.t,b)};B.prototype.attach=function(a,b,c){"undefined"===typeof b&&(b=e);"undefined"===typeof c&&(c=e);
this.ua!==k&&this.detach();var d=this;a&&"undefined"!==typeof a&&(this.ua=b?c?this.Q.Za(a,function(b,c,g,m,h,n){d.e.position.x=b+g/2;d.e.position.y=c+m/2;d.e.scale.x=d.e.scale.y=1;d.e.updateMatrixWorld(e);d.F=e;h&&(h=new f.voodoo.Event("move"),h.object=a,h.client.x=b,h.client.y=c,h.size.x=g,h.size.y=m,d.f.j(k,h));n&&(h=new f.voodoo.Event("resize"),h.object=a,h.client.x=b,h.client.y=c,h.size.x=g,h.size.y=m,d.f.j(k,h))}):this.Q.Za(a,function(b,c,g,m,h,n){d.e.position.x=b+g/2;d.e.position.y=c+m/2;d.e.scale.x=
g;d.e.scale.y=m;d.e.updateMatrixWorld(e);d.F=e;h&&(h=new f.voodoo.Event("move"),h.object=a,h.client.x=b,h.client.y=c,h.size.x=g,h.size.y=m,d.f.j(k,h));n&&(h=new f.voodoo.Event("resize"),h.object=a,h.client.x=b,h.client.y=c,h.size.x=g,h.size.y=m,d.f.j(k,h))}):c?this.Q.Za(a,function(b,c,g,m,h,n){d.e.position.x=b;d.e.position.y=c;d.e.scale.x=d.e.scale.y=1;d.e.updateMatrixWorld(e);d.F=e;h&&(h=new f.voodoo.Event("move"),h.object=a,h.client.x=b,h.client.y=c,h.size.x=g,h.size.y=m,d.f.j(k,h));n&&(h=new f.voodoo.Event("resize"),
h.object=a,h.client.x=b,h.client.y=c,h.size.x=g,h.size.y=m,d.f.j(k,h))}):this.Q.Za(a,function(b,c,g,m,h,n){d.e.position.x=b;d.e.position.y=c;d.e.scale.x=g;d.e.scale.y=m;d.e.updateMatrixWorld(e);d.F=e;h&&(h=new f.voodoo.Event("move"),h.object=a,h.client.x=b,h.client.y=c,h.size.x=g,h.size.y=m,d.f.j(k,h));n&&(h=new f.voodoo.Event("resize"),h.object=a,h.client.x=b,h.client.y=c,h.size.x=g,h.size.y=m,d.f.j(k,h))}),b=new f.voodoo.Event("attach"),b.object=a,this.f.j(this.t,b))};B.prototype.detach=function(){var a=
new f.voodoo.Event("detach");this.f.j(k,a);this.Q.Uc(this.ua);this.ua=k;this.e.position.x=this.e.position.y=0;this.e.scale.x=this.e.scale.y=1;this.e.updateMatrixWorld(e)};B.prototype.off=function(a,b){this.f.mb(a,b)};B.prototype.on=function(a,b){this.f.nb(a,b)};B.prototype.remove=function(a){var b=new f.voodoo.Event("remove");b.object=a;this.f.j(this.t,b);a.addedToVoodooTriggers?a.visible=l:this.e.remove(a);a.addedToVoodooScene=l;b=this.oa.indexOf(a);-1!=b&&this.oa.splice(b,1);this.Rb(a)&&(b=this.fa.indexOf(a),
-1!=b&&this.fa.splice(b,1));this.F=e};B.prototype.u=function(){this.i.remove(this.e);this.ua!==k&&this.detach();this.f.u();this.e=this.t=this.i=this.f=k};B.prototype.Rb=function(a){return a instanceof THREE.Mesh||a instanceof THREE.MorphAnimMesh||a instanceof THREE.SkinnedMesh||a instanceof THREE.Line};E.prototype=new W;E.prototype.constructor=E.constructor;E.prototype.Kb=function(a){return new B(this.i,a)};E.prototype.i=k;R.prototype=new U;R.prototype.constructor=R.constructor;R.prototype.add=function(a,
b){this.v.push(new Q(this.t,a,this,b));a.addedToVoodooScene||(a.visible=l,this.i.add(a));a.addedToVoodooTriggers=e};R.prototype.remove=function(a){for(var b=0;b<this.v.length;++b)this.v[b].na==a&&this.v.splice(b,1);a.addedToVoodooScene&&this.i.remove(a);a.addedToVoodooTriggers=l};R.prototype.u=function(){this.t=this.i=this.v=k};K.prototype=new ca;K.prototype.constructor=K.constructor;K.prototype.Lb=function(a){return new R(this.v,a.scene.i,a)};s.prototype=new C;s.prototype.constructor=s.constructor;
s.prototype.cb=function(a){a?(this.a.c.aboveLayer&&(this.I.style.pointerEvents="auto"),this.a.c.belowLayer&&(this.C.style.pointerEvents="auto"),this.a.c.seamLayer&&(this.G.style.pointerEvents="auto")):(this.a.c.aboveLayer&&(this.I.style.pointerEvents="none"),this.a.c.belowLayer&&(this.C.style.pointerEvents="none"),this.a.c.seamLayer&&(this.G.style.pointerEvents="none"))};s.prototype.ka=function(a){if(a&&"undefined"!==typeof a)for(var b in a.n)a.n[b].scene.F=l};s.prototype.yc=function(){this.bb=1;
var a={antialias:this.a.c.antialias,alpha:e};this.a.c.aboveLayer&&(this.aa=new THREE.WebGLRenderer(a),this.I=this.aa.domElement,this.wb(this.aa),this.I.style.zIndex=this.a.c.aboveZIndex);this.a.c.belowLayer&&(this.D=new THREE.WebGLRenderer(a),this.C=this.D.domElement,this.wb(this.D),this.C.style.zIndex=this.a.c.belowZIndex);this.a.c.aboveLayer&&this.aa.context.getContextAttributes().antialias||this.a.c.belowLayer&&this.D.context.getContextAttributes().antialias||(this.a.c.antialias=l,this.a.c.seamLayer=
l);if(!this.a.c.aboveLayer||!this.a.c.belowLayer)this.a.c.seamLayer=l;this.a.c.seamLayer&&(this.P=new THREE.WebGLRenderer({antialias:l,alpha:e}),this.G=this.P.domElement,this.wb(this.P),this.G.style.zIndex=this.a.c.seamZIndex);this.ga(k);this.pa(k)};s.prototype.zc=function(){var a=this.a.c.renderer;this.a.c.aboveLayer&&(this.L=new v(this.I,this.a.c.fovY,this.a.c.B,this.a.c.H),this.Ab=new E,this.lc=new K,this.jc=new O,this.$=new x(F.Above,a,this.L,this.Ab,this.lc,this.jc),this.Y.push(this.$));this.a.c.belowLayer&&
(this.M=new v(this.C,this.a.c.fovY,this.a.c.B,this.a.c.H),this.Db=new E,this.tc=new K,this.qc=new O,this.ca=new x(F.Below,a,this.M,this.Db,this.tc,this.qc),this.Y.push(this.ca),this.a.c.stencils&&(this.K=new v(this.C,this.a.c.fovY,this.a.c.B,this.a.c.H),this.Eb=new E,this.sc=new K,this.rc=new O,this.ja=new x(F.BelowStencil,a,this.K,this.Eb,this.sc,this.rc),this.Y.push(this.ja)));this.a.c.seamLayer&&(this.A=new v(this.G,this.a.c.fovY,this.a.c.B,this.a.c.H),this.Xa=new E,this.bd=new K,this.Yc=new O,
this.Wa=new x(F.Seam,a,this.A,this.Xa,this.bd,this.Yc),this.Y.push(this.Wa),this.a.c.stencils&&("undefined"===typeof this.K&&(this.K=new v(this.G,this.a.c.fovY,this.a.c.B,this.a.c.H)),this.hc=new E,this.ad=new K,this.$c=new O,this.Ya=new x(F.SeamStencil,a,this.K,this.hc,this.ad,this.$c),this.Y.push(this.Ya)));this.rb=l;this.ic();var b=this;f.addEventListener("resize",function(){b.rb=e},l)};s.prototype.u=function(){this.a.c.aboveLayer&&r.body.removeChild(this.I);this.a.c.belowLayer&&r.body.removeChild(this.C);
this.a.c.seamLayer&&r.body.removeChild(this.G);this.a.c.performanceScaling&&this.da.u()};s.prototype.ma=function(a){if(this.F)return e;if(!a||"undefined"===typeof a)return l;var b=a.d.ib,c;for(c in a.n){var d=a.n[c],f=d.scene;if(d.la&&f.F){if(f.fa.length!==f.oa.length)return e;var d=f.fa,g;for(g in d)if(f=d[g],f.geometry&&"undefined"!==typeof f.geometry&&(f.updateMatrixWorld(e),b.intersectsObject(f)))return e}}return l};s.prototype.ga=function(a){this.nd();var b=this.ya.width,c=this.ya.height,d=b+
"px",g=c+"px",m=f.devicePixelRatio||1,b=b*m*this.bb,c=c*m*this.bb;this.a.c.aboveLayer&&(this.aa.setViewport(0,0,b,c),this.I.style.width=d,this.I.style.height=g,this.I.width=b,this.I.height=c);this.a.c.belowLayer&&(this.D.setViewport(0,0,b,c),this.C.style.width=d,this.C.style.height=g,this.C.width=b,this.C.height=c);this.a.c.seamLayer&&(this.P.setViewport(0,0,b,c),this.G.style.width=d,this.G.style.height=g,this.G.width=b,this.G.height=c);r.body.style.display="none";r.body.style.display="block";this.F=
e;this.a.c.realtime&&a&&this.V()};s.prototype.pa=function(a){this.xb=f.pageXOffset+"px";this.yb=f.pageYOffset+"px";this.F=e;this.a.c.realtime&&a&&this.V()};s.prototype.Sc=function(){var a=this;f.addEventListener("scroll",function(b){a.pa.call(a,b)},l);f.addEventListener("resize",function(b){a.ga.call(a,b)},l)};s.prototype.V=function(){var a=l;this.md();this.a.c.performanceScaling&&(this.da.Ec(),this.a.c.performanceScaling&&!this.dc&&(this.da.hb>this.a.c.Qc||0==this.a.T?this.Zb=new Date:(new Date-
this.Zb)/1E3>this.a.c.Rc&&(this.bb=0.5,this.dc=e,this.ga(k))));if(this.a.c.belowLayer&&(this.ma(this.ca)||this.ma(this.ja)))this.a.c.stencils?(a=this.D.context,a.enable(a.STENCIL_TEST),a.clearStencil(0),a.stencilOp(a.REPLACE,a.REPLACE,a.REPLACE),a.stencilFunc(a.NEVER,1,4294967295),this.D.autoClear=l,this.D.clear(),this.D.render(this.Eb.i,this.K.d),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),a.stencilFunc(a.EQUAL,1,4294967295)):(this.D.context.disable(this.D.context.STENCIL_TEST),this.D.autoClear=e),this.D.render(this.Db.i,
this.M.d),a=e;this.a.c.aboveLayer&&this.ma(this.$)&&(this.aa.render(this.Ab.i,this.L.d),a=e);if(this.a.c.seamLayer&&(this.ma(this.Wa)||this.ma(this.Ya))){var b=this.a.c.Zc,c=this.A.position.z,a=this.P.context;a.enable(a.STENCIL_TEST);this.P.autoClear=l;this.P.clear();this.a.c.stencils?(a.clearStencil(1),a.stencilOp(a.REPLACE,a.REPLACE,a.REPLACE),a.stencilFunc(a.NEVER,0,4294967295),this.P.render(this.hc.i,this.K.d),this.A.Z(c-b,c),this.P.render(this.Xa.i,this.A.d)):a.clearStencil(0);a.stencilOp(a.REPLACE,
a.REPLACE,a.REPLACE);a.stencilFunc(a.NEVER,1,4294967295);this.A.Z(this.a.c.B,c-b);this.P.render(this.Xa.i,this.A.d);a.stencilOp(a.KEEP,a.KEEP,a.KEEP);a.stencilFunc(a.NOTEQUAL,1,4294967295);this.A.Z(c-b,c+b);this.P.render(this.Xa.i,this.A.d);a=e}this.a.c.aboveLayer&&(this.aa.context.finish(),this.I.style.left=this.xb,this.I.style.top=this.yb);this.a.c.belowLayer&&(this.D.context.finish(),this.C.style.left=this.xb,this.C.style.top=this.yb);this.a.c.seamLayer&&(this.P.context.finish(),this.G.style.left=
this.xb,this.G.style.top=this.yb);this.F=l;this.ka(this.$);this.ka(this.ca);this.ka(this.ja);this.ka(this.Wa);this.ka(this.Ya);a&&this.da&&this.da.V()};s.prototype.ub=function(a){this.a.c.aboveLayer&&(this.I.style.cursor=a);this.a.c.belowLayer&&(this.C.style.cursor=a);this.a.c.seamLayer&&(this.G.style.cursor=a)};s.prototype.wb=function(a){var b=a.domElement,c=b.style;a.setFaceCulling(THREE.CullFaceFront,THREE.FrontFaceDirectionCCW);c.position="absolute";c.pointerEvents="none";r.body.appendChild(b)};
s.prototype.md=function(){"undefined"!==typeof this.L&&this.L.m();"undefined"!==typeof this.M&&this.M.m();"undefined"!==typeof this.A&&this.A.m();"undefined"!==typeof this.K&&this.K.m();this.rb&&(this.ic(),this.rb=l);if("undefined"!==typeof this.L&&this.L.O||"undefined"!==typeof this.M&&this.M.O||"undefined"!==typeof this.A&&this.A.O||"undefined"!==typeof this.K&&this.K.O){for(var a=this.a.N,b=new f.voodoo.Event("cameramove"),c=0;c<a.length;++c)a[c].j(b);"undefined"!==typeof this.L&&(this.L.O=l);
"undefined"!==typeof this.M&&(this.M.O=l);"undefined"!==typeof this.A&&(this.A.O=l);"undefined"!==typeof this.K&&(this.K.O=l)}};s.prototype.ic=function(){if(this.a.c.belowLayer)if(this.a.c.aboveLayer){var a=this.M.position.z;this.M.Z(a-0.5,this.a.c.H)}else this.M.Z(this.a.c.B,this.a.c.H);this.a.c.aboveLayer&&(this.a.c.belowLayer?(a=this.L.position.z,this.L.Z(this.a.c.B,a)):this.L.Z(this.a.c.B,this.a.c.H))};s.prototype.nd=function(){var a=r.createElement("div");a.style.cssText="position: fixed; top: 0; left: 0; bottom: 0; right: 0;";
r.documentElement.insertBefore(a,r.documentElement.firstChild);this.ya=new G(a.offsetWidth,a.offsetHeight);r.documentElement.removeChild(a)};s.prototype.od=function(){r.body.style.width="100%";r.body.style.height="100%";r.body.style.margin="0px"};s.prototype.Y=k;u.prototype.destroy=function(){this.f.j(k,new f.voodoo.Event("destroy"));-1!==this.ab&&f.clearInterval(this.ab);-1!==this.Va&&f.clearInterval(this.Va);for(-1!==this.Ua&&f.cancelAnimationFrame(this.Ua);0<this.N.length;)this.N[0].destroy();
this.N=k;this.h.u();this.Pa.u();this.f.u();"undefined"!==typeof f.voodoo.engine&&delete f.voodoo.engine;this.N=this.f=this.Pa=this.h=k;this.Ua=this.Va=this.ab=-1;this.Q=this.jb=this.c=k};u.prototype.frame=function(){this.m();this.h.V()};u.prototype.off=function(a,b){this.f.mb(a,b)};u.prototype.on=function(a,b){this.f.nb(a,b)};u.prototype.models=k;u.prototype.oc=function(a){this.N.push(a);this.f.j(k,new f.voodoo.Event("addmodel",a))};u.prototype.Vc=function(a){this.N.splice(this.N.indexOf(a),1);this.f.j(k,
new f.voodoo.Event("removemodel",a))};u.prototype.fc=function(a,b){var c=this;this.Ua=requestAnimationFrame(function(){c.fc(a,b)});a&&this.m();b&&this.h.V()};u.prototype.ed=function(){var a=this;this.Ka=this.T=0;f.addEventListener("focus",function(){a.T=0;setTimeout(function(){a.T=Date.now()},a.c.hd)},l);f.addEventListener("blur",function(){a.T=0},l);setTimeout(function(){if(!r.hasFocus||r.hasFocus())a.T=Date.now()},a.c.jd)};u.prototype.m=function(){var a=0,b=Date.now();0!=this.T&&(a=(b-this.T)/1E3,
this.T=b);a>2*this.Ka?(b=this.Ka,this.Ka=a,a=b):this.Ka=a;this.Q.m();for(var b=this.N,c=0;c<b.length;++c)b[c].update(a);this.Pa.m()};u.prototype.pd=function(){!this.c.aboveLayer&&!this.c.belowLayer&&t.k("At least one layer must be enabled")};u.prototype.Pa=k;u.prototype.jb=k;u.prototype.c=k;u.prototype.ra=k;u.prototype.h=k;this.engine=u.prototype.Q=k;this.Engine=u;this.version=k;n.prototype.aboveLayer=e;n.prototype.aboveZIndex=9999;n.prototype.antialias=e;n.prototype.belowLayer=e;n.prototype.belowZIndex=
-1;n.prototype.Cc=500;n.prototype.fovY=30;n.prototype.frameLoop=e;n.prototype.performanceScaling=e;n.prototype.Qc=45;n.prototype.Rc=3;n.prototype.realtime=e;n.prototype.renderer=ea.ThreeJs;n.prototype.renderInterval=0;n.prototype.Zc=10;n.prototype.seamLayer=e;n.prototype.seamZIndex=1E4;n.prototype.standardLighting=e;n.prototype.stencils=e;n.prototype.hd=350;n.prototype.jd=1E3;n.prototype.updateInterval=0;n.prototype.H=1E4;n.prototype.B=0.1;this.Options=n;var T=m.extend();T.prototype.createLight=function(){throw"createLight_() undefined.";
};T.prototype.load=function(){this.ea=this.createLight();this.scene.add(this.ea)};T.prototype.unload=function(){this.scene.remove(this.ea)};T.prototype.setColor=function(a){a=f.voodoo.utility.convertCssColorToThreeJsColor(a);this.ea.color.copy(a)};g=g.extend();g.prototype.initialize=function(a){this.Da="undefined"!==typeof a.color?a.color:k;Object.defineProperty(this,"color",{get:z("Da"),set:function(a){this.view.setColor(a);this.Da=a},o:e})};g.prototype.setUpViews=function(){this.color=this.Da?this.Da:
"black"};g.prototype.color=k;g.prototype.stencilViewType=m.extend();m=T.extend();m.prototype.createLight=function(){return new THREE.AmbientLight};var fa=g.extend();fa.prototype.name="AmbientLight";fa.prototype.viewType=m;m=T.extend();m.prototype.createLight=function(){return new THREE.PointLight};m.prototype.load=function(){T.prototype.load.apply(this);this.updatePosition()};m.prototype.updatePosition=function(){this.ea.position.x=this.camera.position.x;this.ea.position.y=this.camera.position.y;
this.ea.position.z=this.camera.position.z};var aa=g.extend();aa.prototype.name="CameraLight";aa.prototype.viewType=m;aa.prototype.setUpViews=function(){this.on("cameramove",function(){this.view.updatePosition()})}}for(var y=["voodoo"],G=f,H=0;H<y.length-1;++H)G=G[y[H]];if("undefined"===typeof G[y[y.length-1]])G[y[y.length-1]]=new W;else{var H=G[y[y.length-1]],ba=new W,V;for(V in ba)H[V]=ba[V]}G[y[y.length-1]].version="0.8.8"})(window,document,void 0);
